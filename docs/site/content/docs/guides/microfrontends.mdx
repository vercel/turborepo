---
title: Microfrontends
description: Learn how to use Turborepo's built-in microfrontends proxy for local development.
---

import { Callout } from '#components/callout';
import { File, Folder, Files } from '#components/files';
import { PackageManagerTabs, Tab } from '#components/tabs';

Microfrontends are an architectural pattern where a web application is decomposed into smaller, independently developed and deployed applications that work together.

Turborepo provides built-in support for running vertical microfrontends locally during development through an integrated proxy server. The proxy coordinates multiple applications and routes traffic between them.

Let's imagine you have a monorepo with multiple frontend applications:

<Files>
  <Folder name="apps" defaultOpen>
    <Folder name="main">
      <File name="package.json" />
      <File name="next.config.js" />
    </Folder>
    <Folder name="docs">
      <File name="package.json" />
      <File name="next.config.js" />
    </Folder>
    <Folder name="marketing">
      <File name="package.json" />
      <File name="vite.config.ts" />
    </Folder>
  </Folder>
  <File name="package.json" />
  <File name="turbo.json" />
</Files>

In production, these applications might be deployed separately and composed together using a reverse proxy or edge routing. But during development, you want to:

- Run all applications simultaneously with a single command
- Access them through a unified URL (e.g., `http://localhost:3024`)
- Route requests to the correct application based on path patterns
- Support hot module reloading and WebSocket connections
- Avoid port conflicts and manual coordination

## Getting started

Turborepo provides a built-in proxy server that automatically routes traffic between your microfrontend applications during development. The proxy reads a `microfrontends.json` configuration file and starts when you run `turbo dev`.

### Configuration

Create a `microfrontends.json` file in one of your application packages (typically the "main" or "root" application):

```json title="./apps/main/microfrontends.json"
{
  "applications": {
    "main": {
      "development": {
        "local": 3000
      }
    },
    "docs": {
      "development": {
        "local": 3001,
        "task": "dev"
      },
      "routing": [
        {
          "paths": ["/docs", "/docs/:path*"]
        }
      ]
    }
  }
}
```

#### Schema validation

The `microfrontends.json` file follows the [OpenAPI schema](https://TODOTODOTODO/microfrontends.json). Most editors will provide autocomplete and validation if you include the `$schema` property:

```json title="./apps/web/microfrontends.json"
{
  "$schema": "TODO"
}
```

### How it works

When you run `turbo dev`, Turborepo will:

1. **Start the proxy server** on the configured port (default: `3024`)
2. **Run development tasks** for all configured applications
3. **Route incoming requests** based on path patterns to the appropriate application

The proxy matches request paths and supports:

- **Exact paths**: `/pricing` matches only `/pricing`
- **Wildcards**: `/docs/:path*` matches `/docs`, `/docs/intro`, `/docs/api/reference`, etc.

### Application configuration

Each application in the `applications` object can have the following properties:

#### `packageName` (optional)

The name of the package in your workspace. If not provided, the application key is used.

```json title="./apps/main-site/microfrontends.json"
{
  "applications": {
    "main-site": {
      "packageName": "web"
    }
  }
}
```

#### `development.local` (required)

The port where the application runs locally. Can be specified as:

- A number: `3000`
- A hostname with port: `"localhost:3000"`
- A URL: `"http://localhost:3000"`

```json title="./apps/web/microfrontends.json"
{
  "development": {
    "local": 3000
  }
}
```

#### `routing` (optional)

An array of path groups that should route to this application. If no routing is provided, the application becomes the **default application** that catches all unmatched routes.

```json title="./apps/web/microfrontends.json"
{
  "routing": [
    {
      "paths": ["/docs", "/docs/:path*"],
      "group": "documentation"
    },
    {
      "paths": ["/api/:version/users/:id"]
    }
  ]
}
```

<Callout type="info">
  Only one application should have no `routing` configuration. This application
  will handle all routes not matched by other applications.
</Callout>

### Path patterns

The proxy supports three types of path segments:

#### Exact matches

```json title="./apps/web/microfrontends.json"
{
  "paths": ["/pricing", "/about", "/contact"]
}
```

These paths match exactly as written.

#### Parameters

```json title="./apps/web/microfrontends.json"
{
  "paths": ["/blog/:slug", "/users/:id/profile"]
}
```

Segments starting with `:` match any single path segment. For example, `/blog/:slug` matches `/blog/hello` but not `/blog/hello/world`.

#### Wildcards

```json title="./apps/web/microfrontends.json"
{
  "paths": ["/docs/:path*", "/api/:version*"]
}
```

Parameters ending with `*` match zero or more path segments. For example, `/docs/:path*` matches `/docs`, `/docs/intro`, and `/docs/api/reference`.

## Automatic integration with `turbo dev`

When you run `turbo dev` in a repository with a `microfrontends.json` file, Turborepo automatically:

1. Detects the microfrontends configuration
2. Starts the proxy server
3. Runs all development tasks in parallel

Now you can access all of your microfrontends applications at `http://localhost:3024`.

## Advanced configuration

### Custom proxy port

Change the proxy port using the `localProxyPort` option:

```json title="./apps/web/microfrontends.json"
{
  "options": {
    "localProxyPort": 8080
  }
}
```

### Multiple routing groups

Organize routes into logical groups for better maintainability:

```json title="./apps/web/microfrontends.json"
{
  "applications": {
    "marketing": {
      "development": {
        "local": 3002
      },
      "routing": [
        {
          "group": "blog",
          "paths": ["/blog", "/blog/:slug*"]
        },
        {
          "group": "sales",
          "paths": ["/pricing", "/contact", "/demo"]
        }
      ]
    }
  }
}
```

The `group` field is for organizational purposes and doesn't affect routing behavior.

### Complex routing patterns

You can define sophisticated routing with nested parameters:

```json title="./apps/web/microfrontends.json"
{
  "routing": [
    {
      "paths": [
        "/api/:version/users",
        "/api/:version/users/:id",
        "/api/:version/posts/:postId/comments/:commentId"
      ]
    }
  ]
}
```

## Integrating with production

The Turborepo microfrontends proxy is meant for local usage only. How you implement and integrate your production microfrontends depends on your production infrastructure. However, we can integrate your local and production environments to create a seamless experience across environments.

To start, we've built Turborepo's local proxy to integrate with Vercel's microfrontends. We look forward to working with any infrastucture providers that would also like to integrate.

### Microfrontends on Vercel

Vercel has native support for microfrontends that provide:

- Production proxy implementation
- Fallback URL support across environments
- Vercel toolbar integration
- Feature flag support
- Asset prefix handling

[Learn more in Vercel's documentation](https://vercel.com/docs/microfrontends).

#### Migrating to `@vercel/microfrontends`

If you install [`@vercel/microfrontends`](https://www.npmjs.com/package/@vercel/microfrontends) in any package or add it to your workspace, Turborepo will automatically defer to it instead of using the built-in proxy. This allows for a gradual migration path.

You can use the same `microfrontends.json` configuration as for Turborepo. Turborepo's `microfrontends.json` schema is a subset of Vercel's schema, so it is compatible with `@vercel/microfrontends`.

To learn more about `@vercel/microfrontends`, [visit the package on npm](https://www.npmjs.com/package/@vercel/microfrontends).

## Troubleshooting

### Port already in use

By default, the microfrontends proxy will try to use port 3024. If you already use that port for a different purpose, you can change Turborepo's port using the [`options.localProxyPort`](#custom-proxy-port).

### Missing CSS, images, or other assets, or routes not matching

Ensure that the paths that the microfrontends matches for in its [`routing` configuration](#routing-optional) include the routes for the assets. Check your network tab to find paths that are or aren't matching as expected.

### Applications not starting

Verify that:

1. The `packageName` matches your actual package name
2. The `task` specified exists in the package's `package.json`
3. Each application's port is available
4. All dependencies are installed

## Complete example

Here's a full example of a microfrontends configuration for an e-commerce platform:

```json title="./apps/web/microfrontends.json"
{
  "$schema": "https://openapi.vercel.sh/microfrontends.json",
  "version": "1",
  "options": {
    "localProxyPort": 3024
  },
  "applications": {
    "web": {
      "packageName": "web",
      "development": {
        "local": 3000,
        "task": "dev"
      }
    },
    "docs": {
      "packageName": "documentation",
      "development": {
        "local": 3001,
        "task": "dev"
      },
      "routing": [
        {
          "group": "documentation",
          "paths": [
            "/docs",
            "/docs/:path*",
            "/api-reference",
            "/api-reference/:path*"
          ]
        }
      ]
    },
    "blog": {
      "development": {
        "local": 3002,
        "task": "dev"
      },
      "routing": [
        {
          "group": "content",
          "paths": [
            "/blog",
            "/blog/:slug",
            "/blog/category/:category",
            "/authors/:author"
          ]
        }
      ]
    },
    "shop": {
      "development": {
        "local": 3003,
        "task": "start:dev"
      },
      "routing": [
        {
          "group": "commerce",
          "paths": [
            "/products",
            "/products/:id",
            "/cart",
            "/checkout",
            "/orders/:orderId"
          ]
        }
      ]
    }
  }
}
```

With this configuration:

- The `web` app handles the homepage and any unmatched routes
- The `docs` app handles all documentation
- The `blog` app handles blog posts and author pages
- The `shop` app handles e-commerce functionality

Run `turbo dev` and access the entire application at `http://localhost:3024`.
