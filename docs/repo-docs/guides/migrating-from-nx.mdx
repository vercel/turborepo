---
title: Migrating from Nx
description: Learn how to migrate to Turborepo from Nx.
---

import { PackageManagerTabs, Tabs, Tab } from '#/components/tabs';

This guide will help you migrate an existing Nx repository to Turborepo.

- Explore key concepts by [migrating from the Nx starter to Turborepo](#migration-steps)
- Considerations for [more complex migration scenarios](#advanced-migration-considerations)

## Why switch?

### Specific Focus

Turborepo is focused on TypeScript and JavaScript packages [built on top of package manager workspaces](/repo/docs/crafting-your-repository/structuring-a-repository). If this matches your focus, you may find it easier to navigate Turborepo's set of features and documentation to find what you are looking for.

### Vercel Interoperability

If you are already a part of the Vercel ecosystem, for example using the infrastructure provided by us, then you will feel right at home with Turborepo.

We provide dedicated [Remote Caching](/repo/docs/core-concepts/remote-caching) options for all Turborepo users, where we store the results of your task on a cloud server. This saves enormous amounts of time by **preventing duplicated work across your entire organization**. [Vercel Remote Cache](https://vercel.com/docs/monorepos/remote-caching) has saved teams over 500 years of compute so far.

### Less global configuration

Nx maintains explicit global configuration (i.e. entries in `nx.json`) in cases where Turborepo prefers implicit defaults. This is again applicable because of Turborepo's narrower focus on TypeScript and JavaScript packages and often means that `turbo.json` files have fewer lines in them than `nx.json` files. This preference for less explicit configuration is not mirrored at the package level, however, where explicit npm scripts are required by Turborepo, whereas Nx infers them via its plugins that are wired up at the global level (in `nx.json`).

For example, here are the tool-specific configurations you'll find in the default starter for Turborepo, and the equivalent Nx preset for developing Next.js applications (with inferred tasks for building, typechecking with TypeScript project references, serving and linting). Nx does not need this level of configuration to work like Turborepo does, but this is the way Nx is recommended to be configured.

<Tabs items={["Turborepo", "Nx"]}>

<Tab value="Turborepo">

```json title="turbo.json"
{
  "$schema": "/schema.json",
  "ui": "tui",
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "inputs": ["$TURBO_DEFAULT$", ".env*"],
      "outputs": [".next/**", "!.next/cache/**"]
    },
    "lint": {
      "dependsOn": ["^lint"]
    },
    "check-types": {
      "dependsOn": ["^check-types"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    }
  }
}
```

</Tab>

<Tab value="Nx">

```json title="nx.json"
{
  "$schema": "./node_modules/nx/schemas/nx-schema.json",
  "namedInputs": {
    "default": ["{projectRoot}/**/*", "sharedGlobals"],
    "production": [
      "default",
      "!{projectRoot}/.eslintrc.json",
      "!{projectRoot}/eslint.config.mjs"
    ],
    "sharedGlobals": []
  },
  "plugins": [
    {
      "plugin": "@nx/js/typescript",
      "options": {
        "typecheck": {
          "targetName": "typecheck"
        },
        "build": {
          "targetName": "build",
          "configName": "tsconfig.lib.json",
          "buildDepsName": "build-deps",
          "watchDepsName": "watch-deps"
        }
      }
    },
    {
      "plugin": "@nx/next/plugin",
      "options": {
        "startTargetName": "start",
        "buildTargetName": "build",
        "devTargetName": "dev",
        "serveStaticTargetName": "serve-static",
        "buildDepsTargetName": "build-deps",
        "watchDepsTargetName": "watch-deps"
      }
    },
    {
      "plugin": "@nx/eslint/plugin",
      "options": {
        "targetName": "lint"
      }
    }
  ],
  "generators": {
    "@nx/next": {
      "application": {
        "style": "tailwind",
        "linter": "eslint"
      }
    }
  }
}
```

## Migration steps

Our goal for this migration is to get a working Turborepo task as quickly as possible, so that you can adopt Turborepo features incrementally. We’ll start by using the Nx scaffolder to create a repository with a Next.js app.

```bash title="Terminal"
npx create-nx-workspace --workspaces --preset=next --ci=skip --e2eTestRunner=none --unitTestRunner=none --style=tailwind --nextAppDir=true --nextSrcDir=false --appName=starter
```

### Step 1: Update .gitignore

Turborepo uses the .turbo directory to hold local caches and other information about your repository. For this reason, it should be added to your `.gitignore`.

```txt title=".gitignore"
.turbo
```

### Step 2: Remove Nx plugin

Remove the Nx plugin from ./apps/starter/next.config.js. The example file below doesn’t have configuration, though your existing Next.js application may need some.

```js title="./apps/starter/next.config.js"
/** @type {import('next').NextConfig} */
const nextConfig = {};

module.exports = nextConfig;
```

### Step 3: Add explicit scripts to the package.json of the application

Nx's Next.js plugin inferred the scripts for the application, but Turborepo uses explicit npm scripts, so we add them like so:

```json title="./apps/starter/package.json"
{
  "scripts": {
    "dev": "next dev",
    "build": "next build"
  }
}
```

### Step 4: Add the `packageManager` field

The root package.json needs to have the `packageManager` field. This ensures developers in the repository use the correct package manager, and that Turborepo can optimize your package graph based on your lockfile.

<PackageManagerTabs>

<Tab>

```json title="./package.json"
{
  "packageManager": "npm@10.0.0"
}
```

</Tab>

<Tab>

```json title="./package.json"
{
  "packageManager": "yarn@1.22.19"
}
```

</Tab>

<Tab>

```json title="./package.json"
{
  "packageManager": "pnpm@9.0.0"
}
```

</Tab>

</PackageManagerTabs>

### Step 5: Run you package manager's install command

Update your lockfile by running your installation command.

<PackageManagerTabs>

<Tab>

```bash title="Terminal"
npm install
```

</Tab>

<Tab>

```bash title="Terminal"
yarn install
```

</Tab>

<Tab>

```bash title="Terminal"
pnpm install
```

</Tab>

</PackageManagerTabs>

Once you've done this, you should see a lockfile diff, indicating that the package has been added to the package manager's workspace.

### Step 6: Install Turborepo

Add Turborepo to the root `package.json` of the workspace.

<PackageManagerTabs>

<Tab>

```bash title="Terminal"
npm install turbo --save-dev
```

</Tab>

<Tab>

```bash title="Terminal"
 yarn add turbo --save-dev --ignore-workspace-root-check
```

</Tab>

<Tab>

```bash title="Terminal"
pnpm install turbo --save-dev --workspace-root
```

</Tab>

</PackageManagerTabs>

You can also optionally install `turbo` globally for added convenience when working with Turborepo.

<PackageManagerTabs>

<Tab>

```bash title="Terminal"
npm install turbo --global
```

</Tab>

<Tab>

```bash title="Terminal"
yarn global add turbo
```

</Tab>

<Tab>

```bash title="Terminal"
pnpm install turbo --global
```

</Tab>

</PackageManagerTabs>

### Step 7: Add a `turbo.json`

Create a `turbo.json` at the root to register your tasks and describe their task dependencies. Note, this does not yet cover the same functionality as was in the original `nx.json` and is an example of getting started quickly with a subset of capabilities.

```json title="./turbo.json"
{
  "tasks": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": [".next/**", "!.next/cache/**"]
    },
    "dev": {
      "cache": false,
      "persistent": true
    }
  }
}
```

### Step 8: Run `turbo build`

Build the application with Turborepo. Using global `turbo`, this would be `turbo build`. You can also run the command through your package manager:

<PackageManagerTabs>

<Tab>

```bash title="Terminal"
npx turbo run build
```

</Tab>

<Tab>

```bash title="Terminal"
 yarn dlx turbo build
```

</Tab>

<Tab>

```bash title="Terminal"
pnpm exec turbo build
```

</Tab>

</PackageManagerTabs>

### Step 9: Enable Remote Caching (optional)

By default, Turborepo will connect to the free-to-use Vercel Remote Cache when you run:

```bash title="Terminal"
turbo login
turbo link
```

You may also configure a self-hosted Remote Cache, which does not require a license or any other fees.

## Advanced migration considerations

While the migration guide above is a good starting point, the breadth of possibilities and capabilities of monorepos means that its difficult to create generalized instructions for all cases. Below, we’ve listed some common next steps that you may be thinking about.

### Migrate complex monorepos incrementally

We encourage incremental migration, meaning you will have both of Nx and Turborepo in your repository at the same time. Make sure to spend time understanding how your Nx task graph is constructed. Splitting up the task graph may include strategies like:

- **Migrating one task at a time**: Changing `nx run lint` to `turbo run lint`
- **Migrating one package/project at a time**: Changing `nx run-many lint test --projects=web` to `turbo run lint test --filter=web`
- **Double-running some of your tasks**: To ensure stability, you may choose to run `turbo run lint` **and** `nx run lint` while you're still getting comfortable and builiding certainty in the early phases of your migration.

### Installing dependencies where they're used

Turborepo recommends [installing packages where they're used](/repo/docs/crafting-your-repository/managing-dependencies#best-practices-for-dependency-installation) to improve cache hit ratios, help dependency pruning capability, and clarify for developers which dependencies are meant for which packages.

Once you have tasks running through Turborepo, we highly recommend that you move dependencies to the `package.json`'s for packages and applications that need them. [Visit our documentation on managing dependencies](/repo/docs/crafting-your-repository/managing-dependencies) to learn more.

### Creating shared packages

You’ll follow roughly the same set of steps as above to add a package to your package manager’s workspace.

1. Ensure the package’s directory is included in the workspace definition (like `./packages/*` ).
2. Add a `package.json` to the package with the scripts it needs to run.
3. Check task dependencies in `turbo.json` to make sure your dependency graph meets your requirements.

### Multi-language monorepos

Turborepo natively supports JavaScript and TypeScript, with secondary support for any other languages you’d like to use. [Visit the Multi-Language support documentation](/repo/docs/guides/multi-language) to learn more.

## Configuration equivalents

Configuration found in `nx.json` can be mapped to `turbo.json` using the tables below.

<Callout type="info">
  The majorify of globs for capturing files are the same between Nx and
  Turborepo. See [our file glob specification](/repo/docs/reference/globs) for
  details and edge cases.
</Callout>

### Global configuration

| Nx                         | Turborepo                                                                     |
| -------------------------- | ----------------------------------------------------------------------------- |
| `sharedGlobals`            | [`globalDependencies`](/repo/docs/reference/configuration#globaldependencies) |
| `sharedGlobals.env`        | [`globalEnv`](/repo/docs/reference/configuration#globalenv)                   |
| `sharedGlobals.namedInput` | [`globalDependencies`](/repo/docs/reference/configuration#globaldependencies) |
| `cacheDirectory`           | [`cacheDir`](/repo/docs/reference/configuration#cachedir)                     |

### Task configuration

| Nx              | Turborepo                                                           |
| --------------- | ------------------------------------------------------------------- |
| `inputs` files  | [`tasks[task].inputs`](/repo/docs/reference/configuration#inputs)   |
| `inputs.env`    | [`tasks[task].env`](/repo/docs/reference/configuration#env)         |
| `outputs` files | [`tasks[task].outputs`](/repo/docs/reference/configuration#outputs) |
| `cache`         | [`tasks[task].cache`](/repo/docs/reference/configuration#cache)     |

### CLI equivalents

| Nx               | Turborepo                                                                    |
| ---------------- | ---------------------------------------------------------------------------- |
| `nx generate`    | [`turbo generate`](/repo/docs/reference/generate)                            |
| `nx run`         | [`turbo run`](/repo/docs/reference/run)                                      |
| `nx run-many`    | [`turbo run`](/repo/docs/reference/run)                                      |
| `nx reset`       | [`--force`](/repo/docs/reference/run#--force)                                |
| `--parallel`     | [`--concurrency`](/repo/docs/reference/run#--concurrency-number--percentage) |
| `--nxBail`       | [`--continue`](/repo/docs/reference/run#--continue)                          |
| `--projects`     | [`--filter`](/repo/docs/reference/run#--filter-string)                       |
| `--graph`        | [`--graph`](/repo/docs/reference/run#--graph-file-type)                      |
| `--output-style` | [`--log-order`](/repo/docs/reference/run#--log-order-option)                 |
| `--no-cloud`     | [`--cache`](/repo/docs/reference/run#--cache-options)                        |
| `--verbose`      | [`--verbosity`](/repo/docs/reference/run#--verbosity)                        |
